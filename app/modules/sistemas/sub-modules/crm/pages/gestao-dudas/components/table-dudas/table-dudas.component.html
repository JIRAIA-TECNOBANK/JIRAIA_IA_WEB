<section class="text-paginator">
  <div class="row d-flex">
    <section class="default-text" *ngIf="paginator">
      Mostrando {{ paginator?.pageSize > totalItems ? totalItems : paginator?.pageSize }} de {{
      totalItems }} resultados
    </section>
  </div>
</section>
<mat-paginator [pageSizeOptions]="[25, 50, 75, 100]" [length]="totalItems" #paginator></mat-paginator>
<table mat-table [dataSource]="items$ | async" matSort (matSortChange)="sortData($event)">
  <ng-container matColumnDef="nome">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Empresa</th>
    <td mat-cell *matCellDef="let element" [title]="element.nome" class="column-max-width">{{ element.nome }}</td>
  </ng-container>

  <ng-container matColumnDef="cnpj">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>CNPJ</th>
    <td mat-cell *matCellDef="let element">
      {{ element.cnpj | mask: formatDocumento() }}
    </td>
  </ng-container>

  <ng-container matColumnDef="quantidadeDisponivel">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Quant. disponível</th>
    <td mat-cell *matCellDef="let element">
      {{ element.quantidadeDisponivel }}
    </td>
  </ng-container>

  <ng-container matColumnDef="modificadoEm">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Data atualização</th>
    <td mat-cell *matCellDef="let element">
      {{ element.modificadoEm ? formatDate(element.modificadoEm) : '-'}}
    </td>
  </ng-container>

  <ng-container matColumnDef="ativo">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let element">
      {{ element.ativo ? 'Parametrizada' : 'Não parametrizada' }}
    </td>
  </ng-container>
  <ng-container matColumnDef="acoes">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let element">
      <div>
        <button mat-button [matMenuTriggerFor]="menu" [id]="utility.getElementId(2, 'acoes', element.id)">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item
            (click)="parametrizarDuda(element.id, element.cnpj, element.quantidadeDisponivel, element.ultimaCompra)"
            [disabled]="!utility.getPermission([Permissoes.GESTAO_OPERACOES_DUDA_PARAMETRIZAR])"
            [id]="utility.getElementId(2, 'parametrizar')">
            Parametrizar
          </button>
          <button mat-menu-item (click)="compraManualDuda(element.cnpj, element.detranId)"
            [disabled]="!utility.getPermission([Permissoes.GESTAO_OPERACOES_DUDA_COMPRAR_MANUAL])"
            [id]="utility.getElementId(2, 'compra-manual')">
            Compra manual
          </button>
          <button mat-menu-item (click)="detalhamento(element.id)"
            [id]="utility.getElementId(2, 'detalhamento-compra')">
            Detalhamento de compra
          </button>
        </mat-menu>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="semRegistro">
    <th class="text-center feedBack pt-1" mat-cell *matFooterCellDef colspan="11">
      <img src="./../../../../../../../../../assets/img/custom-icons/icon-vazio-artigos.svg" />
      <p class="desk bold text-gray-700"> Não há registros. </p>
    </th>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  <tr mat-row *matFooterRowDef="['semRegistro']" [ngClass]="{'d-none': !(totalItems == 0 || totalItems == undefined) }">
  </tr>
</table>
<section class="text-paginator">
  <div class="row d-flex">
    <section class="default-text">
      Mostrando {{ paginator?.pageSize > totalItems ? totalItems : paginator?.pageSize }} de {{
      totalItems }} resultados
    </section>
  </div>
</section>
<mat-paginator (page)="syncPrimaryPaginator($event)" [pageSize]="paginator?.pageSize" [pageIndex]="paginator?.pageIndex"
  [length]="paginator?.length" [pageSizeOptions]="paginator?.pageSizeOptions">
</mat-paginator>