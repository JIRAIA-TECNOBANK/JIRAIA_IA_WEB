<mat-card class="mb-4 mat-elevation-z8">
  <div class="d-flex justify-content-between align-items-center" *ngIf="!dadosEditar">
    <div class="fw-bold">Usuário &nbsp;<i class="fas fa-check text-success"></i></div>
    <button mat-button color="warn" type="button" class="fw-bold" (click)="editarDados()">Editar dados</button>
  </div>
  <div class="d-flex justify-content-between align-items-center" *ngIf="dadosEditar">
    <div class="fw-bold">Dados de acesso</div>
  </div>
  <form *ngIf="dadosEditar" [formGroup]="createUsuarioForm" class="mt-2" (ngSubmit)="submitUsuarioMaster()">
    <div fxLayout="row" fxLayoutGap="10px">
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Nome do usuário</mat-label>
        <input matInput placeholder="Nome do usuário" formControlName="nome" required />
        <mat-error *ngIf="createUsuarioForm.controls['nome'].hasError('required')">Campo obrigatório</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Sobrenome</mat-label>
        <input matInput placeholder="Sobrenome do usuário" formControlName="sobrenome" required />
        <mat-error *ngIf="createUsuarioForm.controls['sobrenome'].hasError('required')">Campo obrigatório</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>CPF</mat-label>
        <input matInput placeholder="000.000.000-00" formControlName="cpf" mask="000.000.000-00" required />
        <mat-error *ngIf="createUsuarioForm.controls['cpf'].hasError('required')">Campo obrigatório</mat-error>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutGap="10px">
      <div class="fw-bold">
        Dados de contato
        <i class="far fa-info-circle text-primary"
          matTooltip="Sempre utilize e-mails corporativos para o usuário master. Porém, em casos específicos aonde não há possibilidade, você poderá adicionar e-mails pessoais."
          matTooltipPosition="right" matTooltipClass="info-tooltip">
        </i>
      </div>
    </div>
    <div fxLayout="row" fxLayoutGap="10px" class="mt-2">
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Departamento</mat-label>
        <mat-select formControlName="departamento" required>
          <mat-option>escolha o departamento</mat-option>
          <mat-option *ngFor="let item of tiposDepartamentos" [value]="item.id">{{ item.nome }}</mat-option>
        </mat-select>
        <mat-error *ngIf="createUsuarioForm.controls['departamento'].hasError('required')">Campo obrigatório
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Cargo</mat-label>
        <mat-select formControlName="cargo" required>
          <mat-option>escolha o cargo</mat-option>
          <mat-option *ngFor="let item of tiposCargos" [value]="item.id">{{ item.nome }}</mat-option>
        </mat-select>
        <mat-error *ngIf="createUsuarioForm.controls['cargo'].hasError('required')">Campo obrigatório
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>E-mail corporativo</mat-label>
        <input matInput placeholder="E-mail corporativo" type="text" formControlName="email" required />
        <mat-error *ngIf="createUsuarioForm.controls['email'].hasError('required')">Campo obrigatório
        </mat-error>
        <mat-error *ngIf="createUsuarioForm.get('email').hasError('pattern')"> E-mail inválido
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Telefone corporativo</mat-label>
        <input matInput placeholder="(00) 00000-0000" formControlName="telefone" mask="(00) 0000-0000 || (00) 00000-0000" required />
        <mat-error *ngIf="createUsuarioForm.controls['telefone'].hasError('required')">Campo obrigatório
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" [style.width.px]="80">
        <mat-label>Ramal </mat-label>
        <input matInput placeholder="0000" formControlName="ramal" />
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutGap="10px" class="mt-2"
      *ngIf="novoDepartamento(createUsuarioForm.get('departamento').value)">
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Novo Departamento</mat-label>
        <input matInput placeholder="Digite o novo departamento" formControlName="novoDepartamento" required />
        <mat-error *ngIf="createUsuarioForm.controls['novoDepartamento'].hasError('required')">Campo
          obrigatório</mat-error>
      </mat-form-field>

      <div class="btn-wrapper">
        <button mat-flat-button class="btn-adicionar" color="primary" type="button"
          (click)="adicionarDepartamento(createUsuarioForm.get('novoDepartamento').value)"
          [disabled]="!createUsuarioForm.get('novoDepartamento').valid">Adicionar</button>
      </div>
    </div>

    <div fxLayout="row" fxLayoutGap="10px" class="mt-2" *ngIf="novoCargo(createUsuarioForm.get('cargo').value)">
      <mat-form-field appearance="outline" fxFlex="auto">
        <mat-label>Novo Cargo</mat-label>
        <input matInput placeholder="Digite o novo cargo" formControlName="novoCargo"
          [required]="novoCargo(createUsuarioForm.get('cargo').value)" />
        <mat-error *ngIf="createUsuarioForm.controls['novoCargo'].hasError('required')">Campo obrigatório</mat-error>
      </mat-form-field>

      <div class="btn-wrapper">
        <button mat-flat-button class="btn-adicionar" color="primary" type="button"
          (click)="adicionarCargo(createUsuarioForm.get('novoCargo').value)"
          [disabled]="!createUsuarioForm.get('novoCargo').valid">Adicionar</button>
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button mat-flat-button color="primary" type="submit"
        [disabled]="!createUsuarioForm.valid || novoDepartamento(createUsuarioForm.get('departamento').value) || novoCargo(createUsuarioForm.get('cargo').value)">Confirmar</button>
    </div>
  </form>
</mat-card>
<div class="d-flex justify-content-between my-4">
  <button mat-stroked-button class="btn-outline-primary" color="primary" type="button" (click)="voltar()">
    Voltar
  </button>
  <button mat-flat-button color="primary" type="text" (click)="concluir()"
    [disabled]="!(createUsuarioForm.valid && createUsuarioForm.get('usuarioGuid').value)">
    Confirmar
  </button>
</div>
