<div>
    <section class="text-paginator">
        <div class="row d-flex">
            <section class="default-text" *ngIf="paginator">
                Mostrando
                {{
                paginator?.pageSize > totalItems
                ? totalItems
                : paginator?.pageSize
                }}
                de {{ totalItems }} resultados
            </section>
        </div>
    </section>
    <mat-paginator [pageSizeOptions]="[totalItems]" [length]="totalItems" aria-label="Itens por página" #paginator>
    </mat-paginator>

    <div>
        <table mat-table [dataSource]="items$ | async" #table="matSort" matSort aria-describedby="DETRANs">
            <ng-container matColumnDef="uf">
                <th mat-header-cell *matHeaderCellDef>
                    UF <i class="fa-regular fa-circle-info text-primary info" [id]="utility.getElementId(14, 'uf')"
                        matTooltipClass="tooltip-grid-header"
                        matTooltip="Atente-se para o DETRAN MG que cobra taxa diferenciada por tipo de operação."></i>
                </th>
                <td mat-cell *matCellDef="let element" [matTooltip]="element.uf">{{
                    element.uf
                    }}</td>
            </ng-container>

            <ng-container matColumnDef="tipoPreco">
                <th mat-header-cell *matHeaderCellDef>Tipo de preço</th>
                <td mat-cell *matCellDef="let element" class="column-max-width">{{
                    retornarTipoPreco(element.precoTbk?.tipoPreco) }}</td>
            </ng-container>

            <ng-container matColumnDef="taxaDetran">
                <th mat-header-cell *matHeaderCellDef>Taxa DETRAN <i class="fa-regular fa-circle-info text-primary info"
                        matTooltipClass="tooltip-grid-header"
                        matTooltip="Consulte a tela Taxa DETRAN para saber quais tipos de operação o DETRAN cobra."></i>
                </th>
                <td mat-cell *matCellDef="let element" class="column-max-width">{{
                    (element.taxaDetran?.valorTaxa ? element.taxaDetran?.valorTaxa : 0) | currency : 'BRL'}}</td>
            </ng-container>

            <ng-container matColumnDef="precoTbk">
                <th mat-header-cell *matHeaderCellDef>Preço TBK <i class="fa-regular fa-circle-info text-primary info"
                        matTooltipClass="tooltip-grid-header"
                        matTooltip="Consulte a tela Preço TBK para saber quais tipos de operação a Tecnobank cobra."></i>
                </th>
                <td mat-cell *matCellDef="let element" class="column-max-width">{{
                    (element.precoTbk?.tipoPreco === 1 ? element.precoTbk?.valorTaxa : 0) | currency : 'BRL' }}</td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>
                    Status
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="status-pill" [ngClass]="
            element.ativo ? 'status-pill__active' : 'status-pill__inactive'
          ">
                        {{ element.ativo ? "Ativo" : "Inativo" }}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="acoes">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element" class="min-width">
                    <div>
                        <button mat-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item (click)="editarDetran(element.id)"
                                [id]="utility.getElementId(2, 'editar-consultar', element.id)">
                                Editar/Consultar
                            </button>
                            <button mat-menu-item [id]="utility.getElementId(2, 'ativar-inativar', element.id)"
                                (click)="clickAtivarInativarDetran(element.id, element.ativo)"
                                [disabled]="!utility.getPermission([Permissoes.GESTAO_FINANCEIRO_PRECO_CADASTRAR, Permissoes.GESTAO_FINANCEIRO_APROVACAO_PRECO_TECNOBANK])">
                                {{ element.ativo ? "Inativar" : "Ativar" }}
                            </button>
                        </mat-menu>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="semRegistro">
                <th class="text-center feedBack pt-1" mat-cell *matFooterCellDef colspan="11">
                    <img src="./../../../../../../../../../../assets/img/custom-icons/icon-vazio-artigos.svg"
                        alt="Não há registros" />
                    <p class="desk bold text-gray-700"> Não há registros. </p>
                </th>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr mat-row *matFooterRowDef="['semRegistro']" [ngClass]="{'d-none': totalItems > 0 }"></tr>
        </table>

        <section class="text-paginator">
            <div class="row d-flex">
                <section class="default-text">
                    Mostrando
                    {{
                    paginator?.pageSize > totalItems
                    ? totalItems
                    : paginator?.pageSize
                    }}
                    de {{ totalItems }} resultados
                </section>
            </div>
        </section>
        <mat-paginator (page)="syncPrimaryPaginator($event)" [pageSize]="paginator.pageSize"
            [pageIndex]="paginator.pageIndex" [length]="paginator.length"
            [pageSizeOptions]="paginator?.pageSizeOptions">
        </mat-paginator>
    </div>
</div>