<div class="px-2">
    <mat-card class="mb-4 mat-elevation-z8">
        <div class="d-flex justify-content-between align-items-center">
            <p class="bold desk mt-0 text-gray-800">Tipo de artigo</p>
        </div>
        <form [formGroup]="formulario" fxLayout="column" fxLayoutGap="20px">

            <div fxLayout="row" fxLayoutGap="10px">
                <mat-form-field appearance="outline" fxFlex="auto">
                    <mat-label>Seção </mat-label>
                    <input type="text" name="secao" formControlName="secao" matInput [matAutocomplete]="secao"
                        placeholder="Seção" [id]="utility.getElementId(0, 'notificacao-secao')" required
                        (ngModelChange)="carregarSecoes(secaotitulo.value)" #secaotitulo
                        (blur)="selecionaSecaoId()" />
                    <mat-autocomplete #secao="matAutocomplete">
                        <mat-option *ngFor="let secao of listSecoes" [value]="secao.titulo">{{
                            secao.titulo }}</mat-option>
                    </mat-autocomplete>
                    <mat-hint>Obrigatório</mat-hint>
                    <mat-error *ngIf="formulario.get('secao').hasError('required')">Obrigatório</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="auto">
                    <mat-label>Título</mat-label>
                    <input matInput placeholder="Título" formControlName="titulo"
                        [id]="utility.getElementId(0, 'notificacao-titulo')" #titulo required />
                    <mat-hint>Obrigatório</mat-hint>
                    <mat-hint align="end">{{ titulo.value?.length || 0 }}/150</mat-hint>
                    <mat-error *ngIf="formulario.controls['titulo'].hasError('required')">Obrigatório</mat-error>
                    <mat-error *ngIf="formulario.controls['titulo'].hasError('maxlength')" align="end">{{
                        titulo.value?.length ||
                        0 }}/150</mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100">
                <angular-editor [(ngModel)]="htmlContent" [config]="config" formControlName="conteudo"></angular-editor>
            </div>

            <div class="d-flex justify-content-between align-items-centermy-1">
                <p class="bold desk my-0 text-gray-800">Conteúdo complementar</p>
            </div>

            <div fxLayout="row" fxLayoutAlign="start" fxLayoutGap="24px">
                <button class="conteudo-complementar" [ngClass]="{ 'preenchido': formulario.get('urlVideo').value }"
                    type="button" (click)="onClickVideo()">
                    <i class="fa-solid fa-video"></i>
                    <p class="bold desk my-0 text-gray-800">Vídeo</p>
                </button>

                <button class="conteudo-complementar" [ngClass]="{ 'preenchido': formulario.get('arquivos').value }"
                    type="button" (click)="onClickArquivo()">
                    <i class="fa-solid fa-folder-open"></i>
                    <p class="bold desk my-0 text-gray-800">Arquivo</p>
                </button>
            </div>

            <div fxLayout="row" fxLayoutGap="10px">
                <div class="pt-1 toggle-default" fxFlex="100">
                    <p class="bold desk mt-0 text-gray-800">Visível para</p>

                    <mat-radio-group [formControl]="formulario.get('statusArtigo')"
                        class="justify-content-center text-center" [id]="utility.getElementId(3, 'artigo-status')">
                        <mat-radio-button [value]="2" class="mb-2">Moderadores e administradores da Central de ajuda
                            (Rascunho)</mat-radio-button>
                        <br>
                        <mat-radio-button [value]="1" class="mb-2">Todos (Publicado)</mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>

            <div class="info-primary mr-2" fxLayout="row" fxLayoutGap="15px"><i
                    class="fa-regular fa-memo-circle-info"></i>
                <ul class="pl-2">
                    <li>
                        <p>Caso não queira publicar esse artigo no momento, deixe-o visível para moderadores
                            e administradores da Central de Ajuda. </p>
                    </li>
                </ul>
            </div>

            <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end center" class="mt-1">
                <button mat-flat-button color="secondary" type="button" (click)="onClickConfirmar()"
                    [id]="utility.getElementId(2, 'confirmar')" [disabled]="!formulario.valid"
                    *ngIf="utility.getPermission([Permissoes.GESTAO_CENTRAL_AJUDA_CADASTRAR])">Confirmar</button>
            </div>
        </form>
    </mat-card>
</div>